import"./bygoogle.BRQFnjcb.js";import{r as x,E as C,q as k,x as S,k as E,a as D,s as L}from"./index.Bh19BK0n.js";import{o as A}from"./share-url.CUyuqAJ2.js";import{p as R,h as y}from"./hue.BXW9woJJ.js";import{a as q}from"./reactivity.esm-bundler.B9gA-MBw.js";import"./prf-down.IJBcvTHf.js";import"./nav.BYu-tQJ2.js";import"./video.B96XBYLv.js";import"./11ja71b.ClXtd6hF.js";import"./searchbar.BkEaGeHP.js";import"./client.BxoC7qM8.js";import"./howto.B1hS0vZV.js";import"./client.CBNTnbJ7.js";import"./client.CmfgSm8P.js";import"./11ja71b.B3e4jnJY.js";import"./usePosition.CAxPozni.js";import"./index.BXyC-gC-.js";import"./core.aJf5XqKH.js";import"./scroll.DMsXU0bZ.js";function I(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}I.g=e}function M(e,i){if(!e)return;const a=document.getElementById(i)||document.createElement("iframe");a.id=i,a.src=e,document.body.appendChild(a)}function B(){if(!__DATA__.isBot){const{id:e,type:i}=n;x.get("/api/statistics/view",{id:e,type:i}),i=="1"?x.get("/api/statistics/detail-out-view",{id:e}):i=="5"&&R("font_detail",1,"come")}}const n=window._getDetailData(),z=q({spin:!1}),v=()=>{z.spin=!1},T=e=>{v(),e&&window.open(e,"_blank")},P=()=>{k("rbg_id_type","".concat(n.id,"_").concat(n.type),{domain:".pngtree.com",expires:1}),T("/remove-background")},W={png:"down-btnfreepng",rar:"down-btnfreerar",ppt:"down-btnfreerar",premium:"down-btnvippng",edit:"down-btnedit",freevideo:"down-btnfreevideo"};function Y(e,i,a){if(!e||z.spin)return;const c=n.one>0||n.limitedTime,p=()=>{if(__DATA__.enterpriseStatus==1)return;const d=+n.vipType;if(d==1&&__DATA__.trial)return C.emit("_amemn8","limitedTime",{onend:v,type:n.type,trial_price:!0}),!0;if(!c&&d>0){const t=__DATA__.vipType<=0;if(t||!t&&d==2)return v(),$app.dialog="upgrade-premium",!0}};if(!$app.checkIsLogin()){y("down-btnnologin-"+e);return}if(e==="remove-bg"){p()||(y("detail/ai-btn-remove-bg"),P());return}switch(z.spin=!0,y(W[e]),e){case"png":case"rar":case"ppt":case"twibbon":const d=e==="png";i&&c?T(i):C.emit("_amemn8","*",{onend:v,type:n.type,btnType:e,licenseType:n.vipType||0,href:i,downUrl:i,rarName:a||"PSD",fee:n.fee&&d});break;case"edit":i&&n.editips&&confirm(n.editips)?(i=i.replace(/\/canvas\/?\?/,"/canvas/designer.html?"),T(i)):p()||T(i);break;case"freevideo":M(i,"down_ifr"),v();break;default:e==="premium"&&__DATA__.cookieLang!=="cht"?C.emit("_amemn8","plans",{onend:v,type:n.type}):T(i);break}}function j(e,i,a){if(!$app.checkIsLogin()){y("downsizes-nologin-"+e);return}if(!i)return;if(document.querySelector("._1rtuhfs")){$app.dialog="device-limit";return}const c=l=>{C.emit("_amemn8",l,{fee:l==="rar"?!0:void 0,onend:v,type:n.type}),y("downsizes-limit-"+e)},{vipType:p,down_count:d,enterpriseStatus:t,has_down:s}=__DATA__,{vipType:o}=n,r=d<=0,f=p==0;if(o==2&&t!=1){c("enterprise");return}if(f){c("plans");return}if([1,6,9].includes(+p)&&r){c("daily");return}if(s>200){c("max");return}a(!0);const h=l=>{a(!1),l&&setTimeout(()=>{location.href=i+"&task_id="+l},100)};x.post("/api/ai-tools/img-enlarge",{id:n.id,multiple:e}).then(l=>{if(l.status==201)h(l.data.task_id);else if(l.status==200){const{task_id:u,md5:g}=l.data;m(u,g,0)}else $toast==null||$toast.error(l.info||"Error!"),a(!1)}).catch(()=>{a(!1),$toast==null||$toast.error("Error!")});function m(l,u,g){!l||g>=50||x.post("/api/ai-tools/img-enlarge-task",{id:n.id,task_id:l,md5:u,multiple:e}).then(_=>{if(_.status==400){$toast==null||$toast.error(_.info),a(!1);return}_.status==200?h(_.data.task_id||l):setTimeout(()=>{m(l,u,++g)},5e3)}).catch(()=>{})}}S("_19z0z4b",()=>{const e={type:"",desc:""};return{loading:!1,err:"",form:{...e},errCls(i){return this.err===i?"_feqbc0":""},onSubmit(){if(this.loading)return;const i={...this.form},a=c=>{if(i[c].trim()==="")return this.err=c,!0};a("type")||a("desc")||(this.err="",this.loading=!0,x.post("/api/message/complaint",{complaint_type:i.type,content:i.desc,element_id:n.id,element_type:n.type}).then(c=>{this.loading=!1,c.rsp==200?($toast==null||$toast.success("Successful!"),this.$nextTick(()=>{$app.onDialog(""),setTimeout(()=>{this.form={...e}},300)})):$toast==null||$toast.error(c.info)}).catch(()=>{this.loading=!1,$toast==null||$toast.error("Error!")}))}}});S("_1r0qupz",e=>({tab:e.tab,prfLoading:!1,tabCls(i){return this.tab===i?"_c5516n":""},onTab(i){this.tab=i},licPrf(i){const a=this.$app;if(!a.tapLogin())return;const c=i==="enterprise",p=c?"team":"",d=n.one>0,{vipType:t,enterpriseStatus:s}=__DATA__,o=c?s!=1:t<=0;if(!d&&o)a.onDialog(c?"_5j84hy":"_1mbqn4s"),y("prfview-btn"+p);else if(!this.prfLoading){this.prfLoading=!0;const r=this._Refs.prfDown,f=()=>{this.prfLoading=!1};r.onshow({...r.getName(n.one,i),slidesdocs:!!n.slidesdocs,data:{action:"detail",id:n.id,type:n.type},resolve:f,reject:f}),y("prfdown-btn"+p)}}}));S("_1um5rr9",e=>({url:e.url,followed:e.is,loading:!1,onFollow(){const i=this.$app;!this.loading&&i.tapLogin()&&(this.loading=!0,x.post("/api/async/designer-follow",{id:e.uid}).then(a=>{this.loading=!1,a.status===200&&(this.followed=!this.followed)}).catch(()=>{this.loading=!1}))}}));S("_166ljwa",e=>{const i="_sstrbf",a="_w2y1cu",c="ontouchstart"in window;let p=!1,d;return{store:z,videoSize:"",wordsExpand:e.is2xl,wordsCount:"+10",wordsFromCls:e.is2xl?"":i,showDownSizes:!1,downSizeSpins:{},imgLoading:!1,zoomImg:null,get zoomCss(){const t=this.zoomImg;return t?{"--s":t.s,"--x":t.x+"px","--y":t.y+"px"}:""},get zoomCls(){return this.zoomImg?"_14enchm":""},get showVideoDown(){return this.videoSize==="down"},"on:mounted"(){const t=this._Refs.hangs;t&&t.setIds(n.id,n.type),this.wordsCalc(!0);const s=o=>this.$refs.imgbox.contains(o.target);document.addEventListener("touchmove",o=>s(o)&&this.previewMove(o),{passive:!1}),document.addEventListener("touchend",o=>s(o)&&this.previewEnd(o),{passive:!1}),B()},wordsMinHeight(t){t.style.height="38px",t.style.overflow="hidden"},wordsOnExpand(){if(this.wordsFromCls=i,this.wordsExpand=!this.wordsExpand,this.wordsExpand){const t=this.$refs.wordsbtn,s=t&&t.parentElement;if(!s)return;s.appendChild(t)}else setTimeout(()=>{this.wordsCalc()},200)},wordsCalc(t){if(window.innerWidth<1024)return;const s=this.$refs.wordsbtn,o=s&&s.parentElement;if(!o)return;const r=()=>{s.classList.remove("_1i3kt2s")};if(t&&e.is2xl){r();return}const f=o.children,h=f.length,m=f[h-1];if(h<=1||m&&m.offsetTop<=0)return;const l=(u,g)=>{if(this.wordsCount="+"+(h-1-g),o.insertBefore(s,u),s.offsetTop>0){const _="previousElementSibling";let w=s[_];for(;w&&w.offsetTop>0;)w=w[_];w&&l(w,g-1)}else o._btn=u,o._btni=g;r()};if(o._btn){l(o._btn,o._btni);return}for(let u=0;u<h;u++){const g=f[u];if(g.offsetTop>0){l(g,u);break}}},onDownld(t,s,o){Y(t,s,o)},onDownSizes(t){this.showDownSizes=t!=null?t:!this.showDownSizes},sizesDownld(t){if(this.downSizeSpins[t])return;const s=this.$refs.downld_png._xprops.u;j(t,s,o=>{this.downSizeSpins[t]=o})},mDownld(){const t=this.$refs.image;n.type=="15"&&t?fetch(t.currentSrc||t.src,{mode:"cors"}).then(s=>s.blob()).then(s=>{const o=URL.createObjectURL(s),r=document.createElement("a");r.className="_zzqtmz _bdjirm",r.href=o,r.download="",document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(o)},100)}).catch(()=>{$toast==null||$toast.error("Download Error!")}):L(40,{target:document.querySelector("._bvrn6v")})},onCopy(){},onPreview(t,s){if(s&&!this.zoomImg){const f=this.$element.querySelector("._bvrn6v .downld-btn-edit");if(f){D.dispatch(f,"click");return}}t.preventDefault(),t.stopPropagation();const o=this.$refs.imglink,r=this.$refs.image;!o.href||n.type!="15"&&o.href===(r.currentSrc||r.src)||(d=()=>{d=void 0;const f=o.querySelector("img."+a);if(this.zoomImg){this.zoomImg=null,f&&(f.style.opacity="0");return}const h=()=>{this.setZoomImg(t.clientX,t.clientY),y("detail-preview-image")};if(this.imgLoading)return;if(f){f.style.opacity="1",h();return}else this.imgLoading=!0;const m=new Image;m.className=r.className,m.decoding=r.decoding,m.classList.add(a),m.onload=()=>{o.appendChild(m),this.imgLoading=!1;const l=this.$refs.imgbox;l.classList.remove("_15xm86z"),l.classList.add("_4ot965"),h()},m.onabort=m.onerror=()=>{this.imgLoading=!1},m.src=o.href},!c&&d())},previewEnd(t){!p&&d&&d(),d=void 0},previewMove(t){const s=p="touches"in t;if(s&&(clearTimeout(this._tmove),this._tmove=setTimeout(()=>{p=!1,delete this._tmove},280)),!this.zoomImg)return;t.preventDefault(),t.stopPropagation();const r=s?t.touches[0]||t.changedTouches[0]:t;this.setZoomImg(r.clientX,r.clientY)},setZoomImg(t,s){const o=this.zoomImg,r=o?o.s:3,f=1,h=this.$refs.imgbox,m=h.getBoundingClientRect(),l=m.left+m.width/2,u=m.top+m.height/2,g=(l-t)*f,_=(u-s)*f,w=r*h.offsetWidth/2,$=r*h.offsetHeight/2;this.zoomImg={s:r,x:Math.max(-w,Math.min(w,g)),y:Math.max(-$,Math.min($,_))}},previewWheel(t){const s=this.zoomImg;if(s){t.preventDefault(),t.stopPropagation();const r=Math.floor(t.deltaY)!==Math.ceil(t.deltaY)?.99:.999,f=s.s*r**t.deltaY;s.s=f<=1?1:f>=5?5:f,this.setZoomImg(t.clientX,t.clientY)}},likeSpin(){const t=this._Refs.hangs;return t?t.likeSpin({id:n.id,type:n.type}):""},likeCls(){const t=this._Refs.hangs;return t?t.likeIcoCls({id:n.id,type:n.type}):""},onLike(){const t=this._Refs.hangs;t&&t.onLike(n.id,n.type)},urlCopying:!1,onShareUrl(){E(location.href).then(()=>(this.urlCopying=!0,this.$nextTick())).then(()=>{setTimeout(()=>{this.urlCopying=!1},2800)})},onShare(t){const s=this.$refs.image,o=s?s.currentSrc||s.src:F(n.shareimg);A({name:t,media:o,title:n.sharetit,word:n.shareword})},how2Attri(){const t=this._Refs.howToAttribute,s=this.$refs.lionName;t.onopen({type:n.type,url:location.pathname,usrName:s&&s.textContent||""})}}});function F(e){return/^https?:\/\//.test(e)?e:"https://png.pngtree.com"+e}const H=e=>e*(96/72);S("_e05maq",e=>({text:"",pt:e.pt,effectId:e.eid,loading:!1,get textCls(){return"effects-text"+this.effectId},get textStyl(){return"--font-size:".concat(H(this.pt),"px")},get fontText(){return this.text||e.p},ptCls(i){return this.pt===i?"_4x0icu":"_1t7gxnv"},ptClick(i){this.pt=i},effectCls(i){return this.effectId===i?"_1abob5y":"_oqy7bn"},effectClick(i){this.effectId=i},"on:mounted"(){O(),this.initCanvas()},initCanvas(){},downPng(){if(this.loading)return;if(this.$app.tapLogin()){const a=this.fontText.trim();if(!a)return;this.loading=!0;const c=()=>{this.loading=!1},p=this.$refs.spanTxt,d=p&&p.parentElement;if(!d)return;const t=this.$refs.canvas,s=getComputedStyle(p);C.emit("_h3jjzr",{styles:{left:p.offsetLeft,top:p.offsetTop+1.25,fontFamily:s.fontFamily,fontSize:parseInt(s.fontSize),fontWeight:s.fontWeight,fontStyle:s.fontStyle},effectId:this.effectId,text:a,textWidth:p.offsetWidth,canvasWidth:d.offsetWidth,canvasHeight:d.offsetHeight,cid:t.id,onok:c,onerr(){c(),$toast==null||$toast.error("Error loading font!")}})}}}));function O(){const e=document.querySelector("style[data-font-style]");if(e&&e.sheet){const i=e.sheet.cssRules,a=i.length;for(let c=0;c<a;c++)X(i[c].cssText);e.parentElement.removeChild(e)}}let b;function X(e){b||(b=document.createElement("style"),document.head.appendChild(b),b.appendChild(document.createTextNode(""))),b.sheet&&b.sheet.insertRule(e,b.sheet.cssRules.length)}export{I as __vite_legacy_guard};
